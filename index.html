<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>RCCG Wonderland Zone – Text to Speech</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">

<style>
:root{
  --blue:#0a3d91;
  --accent:#1abc9c;
}

body{
  font-family: system-ui, sans-serif;
  background: linear-gradient(135deg, #4e1818, #001a4d);
  margin:0;
  padding:10px;
  min-height: 100vh;
  -webkit-text-size-adjust: 100%;
}

.app{
  max-width:900px;
  margin:auto;
  background:#fff;
  border-radius:16px;
  padding:15px;
  box-shadow:0 10px 20px rgba(0,0,0,.15);
}

header{
  text-align:center;
}

header h1{
  margin:10px 0;
  color:var(--blue);
  font-size: clamp(1.5rem, 5vw, 2rem);
}

header p{
  color:#555;
  font-size:14px;
}

textarea{
  width:100%;
  height: clamp(150px, 40vh, 300px);
  padding:12px;
  border-radius:10px;
  border:1px solid #ccc;
  font-size:16px;
  box-sizing: border-box;
  resize: vertical;
  min-height: 150px;
  max-height: 400px;
  -webkit-appearance: none;
}

.controls{
  display:grid;
  grid-template-columns: repeat(3, 1fr);
  gap:8px;
  margin:15px 0;
}

select, button{
  padding:12px;
  border-radius:8px;
  font-size:15px;
  width:100%;
}

button{
  background:var(--blue);
  color:#fff;
  border:none;
  cursor:pointer;
  touch-action: manipulation;
  min-height: 44px;
}

button.secondary{
  background:#777;
}

.meter-container{
  margin:15px 0;
}

.meter{
  height:20px;
  background:#eee;
  border-radius:20px;
  overflow:hidden;
  margin-top:5px;
}

.meter span{
  display:block;
  height:100%;
  width:0%;
  background:linear-gradient(90deg, var(--accent), var(--blue));
  transition:width .1s linear;
}

footer{
  text-align:center;
  font-size:12px;
  color:#777;
  margin-top:15px;
  padding-top:10px;
  border-top:1px solid #eee;
}

/* Mobile-specific adjustments */
@media (max-width: 480px) {
  body{
    padding:5px;
  }
  
  .app{
    padding:12px;
    border-radius:12px;
  }
  
  .controls{
    grid-template-columns: 1fr;
    gap:6px;
  }
  
  select, button{
    padding:14px 12px;
    font-size:16px;
  }
  
  textarea{
    font-size:17px; /* Better for mobile typing */
    padding:15px;
  }
  
  header img{
    width:140px;
    height:auto;
  }
}

/* Tablet adjustments */
@media (min-width: 481px) and (max-width: 768px) {
  .controls{
    grid-template-columns: repeat(3, 1fr);
  }
  
  textarea{
    height: 200px;
  }
}

/* Prevent zoom on iOS input focus */
@media (max-width: 768px) {
  textarea {
    font-size: 16px;
  }
  
  select {
    font-size: 16px;
  }
}
</style>
</head>

<body>
<!--Developed by Sidmoses Technology for RCCG Wonderland Zonal Headquarters, Abule-Egba, Lagos. 08033187992-->
<div class="app">
<header>
  <img src="rccg-logo.png" width="180" alt="RCCG Logo" style="max-width:100%; height:auto;">
  <h1>RCCG Wonderland Zone LP10</h1>
  <p>Text-to-Speech Reader</p>
</header>

<textarea id="text" placeholder="Paste sermon, Bible text, or announcement here..."></textarea>

<div class="controls">
  <button onclick="playSpeech()">▶ Play</button>
  <button class="secondary" onclick="pulseSpeech()">⏸ Pause</button>
  <button class="secondary" onclick="stopSpeech()">⏹ Stop</button>
</div>

<select id="voiceSelect"></select>

<div class="meter-container">
  <label>Voice Frequency Meter</label>
  <div class="meter"><span id="meterBar"></span></div>
</div>

<footer>
  RCCG Wonderland Zone • Powered by Sidmoses Technology
</footer>
</div>

<script>
let voices = [];
let utterance = null;
let isPaused = false;
let meterActive = false;
let nigeriaEnglishVoice = null;

/* Voice selection */
function loadVoices(){
  voices = speechSynthesis.getVoices();
  voiceSelect.innerHTML = "";
  
  // Look for Nigeria English voice first
  nigeriaEnglishVoice = voices.find(v => 
    v.lang.toLowerCase().includes('en-ng') || 
    v.name.toLowerCase().includes('nigeria') ||
    v.name.toLowerCase().includes('africa')
  );
  
  voices.forEach((v,i)=>{
    let o=document.createElement("option");
    o.value=i;
    o.textContent=`${v.name} (${v.lang})`;
    voiceSelect.appendChild(o);
  });

  // Auto-select Nigeria English if available, otherwise best English voice
  if(nigeriaEnglishVoice){
    const nigeriaIndex = voices.indexOf(nigeriaEnglishVoice);
    voiceSelect.value = nigeriaIndex;
  } else {
    const preferred = voices.findIndex(v =>
      v.name.toLowerCase().includes("google") && v.lang.startsWith("en")
    );
    voiceSelect.value = preferred !== -1 ? preferred : 0;
  }
}

// Load voices when they become available
if(speechSynthesis.onvoiceschanged !== undefined){
  speechSynthesis.onvoiceschanged = loadVoices;
}

// Try loading voices immediately
loadVoices();

/* PLAY */
function playSpeech(){
  stopSpeech(); // clean start

  const text = document.getElementById("text").value.trim();
  if(!text) return;

  utterance = new SpeechSynthesisUtterance(text);
  
  // Use selected voice
  const selectedVoiceIndex = parseInt(voiceSelect.value);
  if(selectedVoiceIndex >= 0 && selectedVoiceIndex < voices.length){
    utterance.voice = voices[selectedVoiceIndex];
  }

  utterance.onstart = () => {
    meterActive = true;
    animateMeter();
  };

  utterance.onend = stopSpeech;

  speechSynthesis.speak(utterance);
}

/* PULSE (Pause / Resume) */
function pulseSpeech(){
  if(!speechSynthesis.speaking) return;

  if(isPaused){
    speechSynthesis.resume();
    meterActive = true;
    animateMeter();
  }else{
    speechSynthesis.pause();
    meterActive = false;
    updateMeter(0);
  }
  isPaused = !isPaused;
}

/* STOP */
function stopSpeech(){
  speechSynthesis.cancel();
  isPaused = false;
  meterActive = false;
  updateMeter(0);
}

/* Meter simulation */
function animateMeter(){
  if(!meterActive) return;
  updateMeter(30 + Math.random() * 60);
  setTimeout(animateMeter, 120);
}

function updateMeter(val){
  meterBar.style.width = val + "%";
}

// Prevent accidental form submission on mobile
document.addEventListener('touchstart', function(){}, {passive: true});
</script>

</body>

</html>

